<!DOCTYPE html><html lang="en"><head><meta name="description" content="This is a repository that helps students, from any area, learn and practice with CS-related tools. For example, Vim, Gdb and Git. Our goal is to help students being more proficient and efficient using these tools."/><meta property="og:image" content="/cs-essentials/images/cs-essentials-thumb.png"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="description" content=""/><meta property="og:image" content="https://og-image.now.sh/CS%20Essentials%20by%20IEEE-IST%20CS.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.zeit.co%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="CS Essentials by IEEE-IST CS"/><meta name="twitter:card" content="summary_large_image"/><title>Gdb - Core Files</title><meta name="next-head-count" content="8"/><link rel="preload" href="/cs-essentials/_next/static/css/8f7dea4eee4add902925.css" as="style"/><link rel="stylesheet" href="/cs-essentials/_next/static/css/8f7dea4eee4add902925.css"/><link rel="preload" href="/cs-essentials/_next/static/css/6e584e27af098d67e5d0.css" as="style"/><link rel="stylesheet" href="/cs-essentials/_next/static/css/6e584e27af098d67e5d0.css"/><link rel="preload" href="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/pages/_app.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/pages/content/%5Btopic%5D/%5Bpage%5D.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/runtime/webpack-c212667a5f965e81e004.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/chunks/framework.e84fa698c7ee940652bd.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/chunks/commons.3297d2a2d38dac4ad796.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/runtime/main-d8f6cc11b1d0cf8a72db.js" as="script"/><link rel="preload" href="/cs-essentials/_next/static/chunks/7defe92dea054cc117d2598a24fa7cad9ea488b7.56501811ca40d39cc86f.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><div class="layout_headerLeft__3fXgx"><a class="layout_headerLogoLink__urb23" href="/cs-essentials/"><img class="layout_headerLogo__1xykU" src="/cs-essentials/images/logo-cs.png" alt="logo"/></a></div><div class="layout_headerSearch__2YZ7L"><input placeholder="Search"/><a class="layout_headerSearchBtn__2eN1c" href="/cs-essentials/search?query="><img src="/cs-essentials/icons/search.svg"/></a></div><div class="layout_headerRight__1L-eG"><span class="layout_headerIcon__E1PDy layout_headerSearchIcon__sWHGS"><img src="/cs-essentials/icons/search.svg" alt="search-icon"/></span><a class="layout_headerIcon__E1PDy" href="/cs-essentials/about"><img src="/cs-essentials/icons/information.svg" alt="info-icon"/></a></div></header><div class="layout_mainContent__2pAB6"><div class="layout_backToHome__1vZsp"><a href="/cs-essentials/"><img src="/cs-essentials/icons/chevron--left.svg" alt="back-icon"/><span>Back to Home</span></a></div><main><div class="layout_contentContainer__3dLAS"><div class="content_pageContentContainer__3dgQS"><div class=" layout_contentSidebar__2y3p8"><ul class="layout_sidebarList__jgfwt"><li class="layout_sidebarItem__oQ0rm "><a href="/cs-essentials/content/gdb/Introduction">Introduction</a></li><li class="layout_sidebarItem__oQ0rm "><a href="/cs-essentials/content/gdb/Commands">Commands</a></li><li class="layout_sidebarItem__oQ0rm layout_active__2jiY4"><a href="/cs-essentials/content/gdb/Core%2520Files">Core Files</a></li><li class="layout_sidebarItem__oQ0rm "><a href="/cs-essentials/content/gdb/GUI">GUI</a></li><li class="layout_sidebarItem__oQ0rm "><a href="/cs-essentials/content/gdb/Assembly">Assembly</a></li></ul></div><div class=" cards_contentCard__BH2ES"><article class="cards_contentArticle__1g4ga"><div><h1>GDB - Debug with core files</h1>
<p>A Core Dump is a file containing a process's address space (memory) when the process terminates unexpectedly. This file is very useful for debugging, for example, segmentation faults.</p>
<h2>Generate a Core Dump file</h2>
<p>Most systems by default have the core dump file generation disabled. We can check by running the following command:</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">ulimit</span> -c</span>
0</code></pre>
<p>To enable the creation we need to run the following commands:</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">ulimit</span> -c unlimited</span></code></pre>
<h2>The program</h2>
<p>To examplify how you can use the Core Dump and the GDB to better debug your programs, we will use this very simple program:</p>
<pre><code class="hljs language-c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">char</span>* s = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">char</span> c = s[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
<p>Now we can compile and run the program.</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> gcc -g example.c</span>
<span class="hljs-meta">$</span><span class="bash"> ./a.out</span>
Segmentation fault (core dumped)</code></pre>
<p>Make sure that the Core Dump file was created, you can use the "ls" command.</p>
<h2>Debug</h2>
<p>Now that we have the core file we can start the debug process.</p>
<h3>Open GDB</h3>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> gdb a.out core</span>
Core Dump was generated by `./a.out'.
Program terminated with signal SIGSEGV, Segmentation fault.
<span class="hljs-meta">#</span><span class="bash">0  0x0000563a5b9f160a <span class="hljs-keyword">in</span> nullPtr () at hello.c:3</span>
3               char c = s[0];</code></pre>
<p>The first thing we are going to do is use the "backtrace" command. A program when running maintains a call stack that contains information about the functions that have been called so far. Each item in the stack is a call frame, and each frame contains both the information needed to return to its caller and the information needed to provide the local variables of the function. Backtrace is used to get a stack trace from the time when the SIGSEGV was raised. Each frame in the stack has a number, where 0 is the most recent call. </p>
<pre><code class="hljs language-shell">(gdb) bt
<span class="hljs-meta">#</span><span class="bash">0  0x0000563a5b9f160a <span class="hljs-keyword">in</span> nullPtr () at hello.c:3</span>
<span class="hljs-meta">#</span><span class="bash">1  0x0000563a5b9f1621 <span class="hljs-keyword">in</span> main () at hello.c:7</span></code></pre>
<p>This example is trivial, but in normal cases, this backtrace is essential and gives the programmer a good idea of what the problem might be.</p>
<p>In some cases it might be useful to use the "frame" command to gives us more information about each frame. For example the frame 0:</p>
<pre><code class="hljs language-shell">(gdb) frame 0
<span class="hljs-meta">#</span><span class="bash">0  0x0000563a5b9f160a <span class="hljs-keyword">in</span> nullPtr () at hello.c:3</span>
3               char c = s[0];</code></pre>
<p>This information is the same given by the debugger when we started. This is because the operation "s[0]" is trying to access an invalid memory position (0x0), which is the problem with our program.</p>
</div><a class="layout_editLink__3ozQD" href="https://github.com/cs-ieee-ist/cs-essentials/tree/master/content/topics/gdb/2-Core Files.md" target="_blank" rel="noreferrer noopener"><img src="/cs-essentials/icons/edit.svg" alt="edit-icon"/>Edit this page</a></article></div><div class="content_dummySidebar__LMYsL"></div></div></div></main></div><footer class="layout_footer__127N0"><span class="layout_footerTitle__36Eb7">CS Essentials by IEEE-IST CS</span></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contentData":{"topic":"gdb","page":"2-Core Files.md","contentHtml":"\u003ch1\u003eGDB - Debug with core files\u003c/h1\u003e\n\u003cp\u003eA Core Dump is a file containing a process's address space (memory) when the process terminates unexpectedly. This file is very useful for debugging, for example, segmentation faults.\u003c/p\u003e\n\u003ch2\u003eGenerate a Core Dump file\u003c/h2\u003e\n\u003cp\u003eMost systems by default have the core dump file generation disabled. We can check by running the following command:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e \u003cspan class=\"hljs-built_in\"\u003eulimit\u003c/span\u003e -c\u003c/span\u003e\n0\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo enable the creation we need to run the following commands:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e \u003cspan class=\"hljs-built_in\"\u003eulimit\u003c/span\u003e -c unlimited\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eThe program\u003c/h2\u003e\n\u003cp\u003eTo examplify how you can use the Core Dump and the GDB to better debug your programs, we will use this very simple program:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emain\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n        \u003cspan class=\"hljs-keyword\"\u003echar\u003c/span\u003e* s = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003echar\u003c/span\u003e c = s[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e];\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e;\n}\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow we can compile and run the program.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e gcc -g example.c\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ./a.out\u003c/span\u003e\nSegmentation fault (core dumped)\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMake sure that the Core Dump file was created, you can use the \"ls\" command.\u003c/p\u003e\n\u003ch2\u003eDebug\u003c/h2\u003e\n\u003cp\u003eNow that we have the core file we can start the debug process.\u003c/p\u003e\n\u003ch3\u003eOpen GDB\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e gdb a.out core\u003c/span\u003e\nCore Dump was generated by `./a.out'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n\u003cspan class=\"hljs-meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e0  0x0000563a5b9f160a \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e nullPtr () at hello.c:3\u003c/span\u003e\n3               char c = s[0];\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe first thing we are going to do is use the \"backtrace\" command. A program when running maintains a call stack that contains information about the functions that have been called so far. Each item in the stack is a call frame, and each frame contains both the information needed to return to its caller and the information needed to provide the local variables of the function. Backtrace is used to get a stack trace from the time when the SIGSEGV was raised. Each frame in the stack has a number, where 0 is the most recent call. \u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e(gdb) bt\n\u003cspan class=\"hljs-meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e0  0x0000563a5b9f160a \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e nullPtr () at hello.c:3\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e1  0x0000563a5b9f1621 \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e main () at hello.c:7\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis example is trivial, but in normal cases, this backtrace is essential and gives the programmer a good idea of what the problem might be.\u003c/p\u003e\n\u003cp\u003eIn some cases it might be useful to use the \"frame\" command to gives us more information about each frame. For example the frame 0:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e(gdb) frame 0\n\u003cspan class=\"hljs-meta\"\u003e#\u003c/span\u003e\u003cspan class=\"bash\"\u003e0  0x0000563a5b9f160a \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e nullPtr () at hello.c:3\u003c/span\u003e\n3               char c = s[0];\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis information is the same given by the debugger when we started. This is because the operation \"s[0]\" is trying to access an invalid memory position (0x0), which is the problem with our program.\u003c/p\u003e\n"},"topicPages":[{"topic":"gdb","page":"Introduction"},{"topic":"gdb","page":"Commands"},{"topic":"gdb","page":"Core Files"},{"topic":"gdb","page":"GUI"},{"topic":"gdb","page":"Assembly"}]},"__N_SSG":true},"page":"/content/[topic]/[page]","query":{"topic":"gdb","page":"Core Files"},"buildId":"y_E45RGkLJDca5zXKs2D2","assetPrefix":"/cs-essentials","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/cs-essentials/_next/static/runtime/polyfills-2f74f7d9820760171318.js"></script><script async="" data-next-page="/_app" src="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/pages/_app.js"></script><script async="" data-next-page="/content/[topic]/[page]" src="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/pages/content/%5Btopic%5D/%5Bpage%5D.js"></script><script src="/cs-essentials/_next/static/runtime/webpack-c212667a5f965e81e004.js" async=""></script><script src="/cs-essentials/_next/static/chunks/framework.e84fa698c7ee940652bd.js" async=""></script><script src="/cs-essentials/_next/static/chunks/commons.3297d2a2d38dac4ad796.js" async=""></script><script src="/cs-essentials/_next/static/runtime/main-d8f6cc11b1d0cf8a72db.js" async=""></script><script src="/cs-essentials/_next/static/chunks/7defe92dea054cc117d2598a24fa7cad9ea488b7.56501811ca40d39cc86f.js" async=""></script><script src="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/_buildManifest.js" async=""></script><script src="/cs-essentials/_next/static/y_E45RGkLJDca5zXKs2D2/_ssgManifest.js" async=""></script></body></html>