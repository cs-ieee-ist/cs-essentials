{"pageProps":{"contentData":{"topic":"vim","page":"4-Reg and Macros.md","contentHtml":"<h1>Vim - Registers and Macros</h1>\n<h2>Registers</h2>\n<h3>What is a register?</h3>\n<p>Vim's registers are spaces in memory that vim uses to store some text.\nEach one of these registers has an identifier, so they can be accessed later.</p>\n<p>It like when you copy some text to your clipboard, except in this case you have more than one clipboard.</p>\n<h3>Basic uses of registers</h3>\n<p>Every register is accessed using a double quote before its name, we can access the content in register <strong>a</strong> using <strong>\"a</strong>.</p>\n<p>You could add the selected text to the register <strong>a</strong> by doing <strong>\"ay</strong>.\nBy doing y you are yanking the selected text, and then adding it to the register <strong>\"a</strong>.\nTo paste the content of this register, the logic is the same: <strong>\"ap</strong>. You are pasting the data that is in this register.</p>\n<p>You can use the <strong>:reg</strong> command to see all the registers and their content, or filter just the ones that you are interested with <strong>:reg a b c</strong>.</p>\n<h3>The Default Register</h3>\n<p>When you <strong>delete</strong>, <strong>change</strong> or <strong>yank</strong> text, the text under the operation is store in a <strong>register</strong>\nBy default, the text is stored in a default register, when you <strong>paste</strong>, the text is pasted from the <strong>default register</strong>.</p>\n<h3>Numbered Registers</h3>\n<p>When we yank some text, then delete some other, and try to paste the yanked text, it doesn't work, because vim replaced it with the text you deleted, so you need to go and yank the text again? </p>\n<p>Vim will always replace the default register, but <strong>no</strong> we did not lose the yanked text!!</p>\n<p>Vim populates what is called numbered registers, there are register <strong>\"0</strong> to <strong>\"9</strong>. <strong>\"0</strong> will have the lasted yanked, changed, deleted text, <strong>\"1</strong> the second latest, and <strong>\"9</strong> the oldest.</p>\n<p>So if you deleted, yanked some text you can always paste using <strong>\"4g</strong>.</p>\n<h3>Read-Only Registers</h3>\n<p>There are 4 read-only registers <strong>\". \"% \": \"#</strong></p>\n<table>\n<thead>\n<tr>\n<th>Read-Only Reg</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>\".</td>\n<td>last inserted text</td>\n</tr>\n<tr>\n<td>\"%</td>\n<td>current file path, starting from the directory where vim was first opened</td>\n</tr>\n<tr>\n<td>\":</td>\n<td>most recently executed command</td>\n</tr>\n<tr>\n<td>\"#</td>\n<td>name of the last edited file</td>\n</tr>\n</tbody>\n</table>\n<h2>Macros</h2>\n<p>Some of these sub-topics are is so well documented in <a href=\"https://vim.fandom.com/wiki/Macros\">Vim Tips Wiki</a>, that we will just gather, organize and comment on the information that the wiki published.</p>\n<h3>What is a macro in vim?</h3>\n<p>Recording a macro is a great way to perform a one-time task, or to get things done quickly when you don't want to mess with Vim script or mappings, or if you do not yet know how to do it more elegantly.</p>\n<p>In Vim, the word \"macro\" may refer to:</p>\n<ul>\n<li>A sequence of commands recorded to a register.</li>\n<li>A mapping to expand a sequence of typed keys to a longer sequence.</li>\n<li>A script is written in the Vim script language.</li>\n</ul>\n<h3>How to record a macro?</h3>\n<p>Each register is identified by a letter a to z.</p>\n<p>To enter a macro, type:</p>\n<pre><code class=\"hljs language-vim\">q<span class=\"hljs-symbol\">&#x3C;letter></span><span class=\"hljs-symbol\">&#x3C;commands></span>q</code></pre>\n<p>To execute the macro <number> times (once by default), type:</p>\n<pre><code class=\"hljs language-vim\"><span class=\"hljs-symbol\">&#x3C;number></span>@<span class=\"hljs-symbol\">&#x3C;letter></span></code></pre>\n<p>So, the complete process looks like:</p>\n<table>\n<thead>\n<tr>\n<th>Macro Table</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>qd</td>\n<td>start recording to register d</td>\n</tr>\n<tr>\n<td>...</td>\n<td>your complex series of commands</td>\n</tr>\n<tr>\n<td>q</td>\n<td>stop recording</td>\n</tr>\n<tr>\n<td>@d</td>\n<td>execute your macro</td>\n</tr>\n<tr>\n<td>@@</td>\n<td>execute your macro again</td>\n</tr>\n</tbody>\n</table>\n<h3>Usefull example with macros</h3>\n<ul>\n<li>Given some data like the following:</li>\n</ul>\n<pre><code class=\"hljs language-xml\">one first example\ntwo second example\nthree   third example\nfour    fourth example</code></pre>\n<ul>\n<li>suppose you want to change the data to make a dictionary for a Python program, with this result:</li>\n</ul>\n<pre><code class=\"hljs language-python\">data = {\n    <span class=\"hljs-string\">'one'</span>: <span class=\"hljs-string\">'first example'</span>,\n    <span class=\"hljs-string\">'two'</span>: <span class=\"hljs-string\">'second example'</span>,\n    <span class=\"hljs-string\">'three'</span>: <span class=\"hljs-string\">'third example'</span>,\n    <span class=\"hljs-string\">'four'</span>: <span class=\"hljs-string\">'fourth example'</span>,\n}</code></pre>\n<p>To do this, record a macro while changing the first line. Then, playback the macro to change each other line. When finished, manually insert the initial <strong>data = {</strong> line, and the final <strong>}</strong> line.</p>\n<p>The following shows one way to record a suitable macro.</p>\n<ol>\n<li>Put the cursor on the first line.</li>\n<li>Type qd (the q starts recording; the d is the register where keys will be recorded).</li>\n<li>Type the following command to change the first sequence of whitespace to <strong>': '</strong>:<ul>\n<li>:s/\\s+/': ' (then press Enter)</li>\n</ul></li>\n<li>Type the following to insert four spaces followed by <strong>'</strong> at the start of the line:<ul>\n<li>I    ' (then press Escape)</li>\n</ul></li>\n<li>Type the following to append <strong>',</strong> to the line:<ul>\n<li>A', (then press Escape)</li>\n</ul></li>\n<li>Type the following to move the cursor to the start of the line, then down to the next line:<ul>\n<li>0j (or press Enter)</li>\n</ul></li>\n<li>Type q to stop recording the macro.</li>\n</ol>\n<p>The cursor should now be on the second line. Type @d to playback the macro once. That should change the second line, with the cursor finishing on the third line.\nRemember counts? Type 2@@ to finish. The 2 means that what follows is performed twice, and the @@ plays back the last used macro.</p>\n<h3>Viewing a macro</h3>\n<p>You can use the <strong>:reg</strong> command to view the current contents of any or all register values in Vim. </p>\n<p>For example, use :reg to view all registers, or <strong>:reg a</strong> to view only what you have recorded into register <strong>a</strong>. Typing <strong>:reg abx</strong> will show the contents of registers <strong>a</strong>, <strong>b</strong>, and <strong>x</strong>.</p>\n<h3>Saving a macro</h3>\n<p>After recording the macro. This just goes into one of the registers so you can paste it as normal with the \"xp commands in normal mode.</p>\n<p>To save it you open up .vimrc and paste the contents, then the register will be around the next time you start vim.\nThe format of the vimrc line should be:</p>\n<pre><code class=\"hljs language-vim\"><span class=\"hljs-keyword\">let</span> @q = <span class=\"hljs-string\">'macro contents'</span></code></pre>\n<p>Be careful of quotes!!!!</p>\n<p>Here's a small guide to saving a macro permanently:</p>\n<ol>\n<li>From normal mode: qq</li>\n<li>enter whatever commands</li>\n<li>From normal mode: q</li>\n<li>open .vimrc</li>\n<li><strong>\"qp</strong> to insert the macro into your <strong>let @q = '...'</strong></li>\n</ol>\n<h3>Editing a macro</h3>\n<p>Imagine that you just wrote a vim macro and stopped recording.\nThen you realize that you forgot to add a ^ to the beginning of it, instead of recording the re-record the macro there are simple ways to edit an existing macro.</p>\n<ol>\n<li>Type <strong>\"ap</strong> to paste the contents of the register.</li>\n<li>Enter insert mode and edit the text as required.</li>\n<li>Press Esc to return to normal mode.</li>\n<li>Type <strong>\"ayy</strong> to yank the modified macro into the register.</li>\n</ol>\n"},"topicPages":[{"topic":"vim","page":"Introduction"},{"topic":"vim","page":"Basics"},{"topic":"vim","page":"Movement"},{"topic":"vim","page":"Interface"},{"topic":"vim","page":"Reg and Macros"},{"topic":"vim","page":"Customization"},{"topic":"vim","page":"CheatSheet"},{"topic":"vim","page":"Further Reading"}]},"__N_SSG":true}